# 图形环境
pacman -S xorg-server xorg-xinit
# i3套
pacman -S zsh xfce4-terminal feh compton i3-gaps 
# 触摸板
pacman -S xf86-input-synaptics
# 用户创建
useradd -m -g users -G wheel -s /bin/zsh username
vim /etc/sudoers 
passwd username
# 拷贝xinitrc文件到用户目录
su username
sudo cp /etc/X11/xinit/xinitrc ~/.xinitrc
# 在.xinitrc添加如下内容
```
exec compton -b &
exec fcitx &                                     
exec i3 -V >> ~/.config/i3/log/i3log-$(date +'%F-%k-%M-%S') 2>&1
```
# reboot startx
#文本编辑器 启动器 文件管理器及配件 文件管理器 浏览器 PDF查看器 视频播放器 网络管理器 音量调节（alsamixer，加M）
pacman -S gedit rofi thunar gvfs-smb ranger google-chrome evince mplayer networkmanager alsa-utils


pacman -S yaourt 

yaourt -S ttf-monaco ttf-font-awesome
# 安装polybar
```
yaourt -S polybar-git
```
# 双显卡切换器
# 启用multilib源来安装lib32，即lib32-virtualgl ，
pacman -S bumblebee mesa lib32-virtualgl lib32-nvidia-utils mesa-demos 
gpasswd -a user bumblebee
systemctl enable bumblebeed.service

# 安装英特尔显卡
pacman -S xf86-video-intel
vim /etc/X11/xorg.conf.d/20-intel.conf
# 加入内容：
Section "Device"
   Identifier  "Intel Graphics"
   Driver      "intel"
EndSection
# 检查你没有把Intel列入 /etc/modprobe.d/ 或 /usr/lib/modprobe.d/ 中的modprobe的黑名单文件中
# 基于模块的省电选项
$ modinfo -p i915

# 安装英伟达显卡
pacman -S nvidia nvidia-utils

reboot
# 以使得nouveau加入模块的黑名单生效
# 自动配置
nvidia-xconfig

# 最小配置模式
vim /etc/X11/xorg.conf
# 加入内容：

Section "Device"
   Identifier     "Device0"
   Driver         "nvidia"
   VendorName     "NVIDIA Corporation"
EndSection
# 假如您已经预先安装了开源驱动nouveau，请确定已经从/etc/mkinitcpio.conf里面去除"nouveau"。

# or脚本
# 使用 NVIDIA Settings
# 你也可以使用由软件包nvidia-utils提供的nvidia-settings工具. 通过这个方法你可以使用NVIDIA公司随驱动程序提供的受限软件. 只需要以root权限运行命令nvidia-settings就可以自由设置驱动,你的设置将会被保存到文件/etc/X11/xorg.conf.d/10-monitor.conf中.

# 启用省电功能，在Monitor节下添加：
Option "DPMS" "1"
# 启用亮度控制，在Device节下添加:
Option "RegistryDwords" "EnableBrightnessControl=1"
# (没有笔记本电脑上的亮度控制,尝试在20-nvidia.conf添加下面的行：
Option "RegistryDwords" "EnableBrightnessControl=1")

# 强制Powermizer性能水平(适用于笔记本),在Device节下添加：
# 强制Powermizer任何时间都在在特定级别
# level 0x1=highest
# level 0x2=med
# level 0x3=lowest
# 交流电源设置：
Option "RegistryDwords" "PowerMizerLevelAC=0x3"
# 电池设置：
Option	"RegistryDwords" "PowerMizerLevel=0x3"
# 禁用vblank中断(适用于笔记本),当运行中断检测的实用工具powertop， When running the interrupt detection utility powertop,它可以观察到英伟达驱动将会为每个vblank产生一个中断。在Device节下放置以下选项来禁用：
Option "OnDemandVBlankInterrupts" "1"
# 检查电源状态,英伟达的Xorg驱动可以检测电源。可以检查'GPUPowerSource'这个只读参数来实现(0 - 交流电源，1 - 电池)：
$ nvidia-settings -q GPUPowerSource -t
# 为了能够实现检测，您需要预先安装acpid，并且把它添加到rc.conf的DAEMONS里面，否则系统日志会出现警告
# 电源事件管理器
pacman -S acpid
systemctl start acpid.service
systemctl enable acpid.service

# 安装 mesa-demos 并使用 glxgears 测试 Bumblebee 是否工作：
$ optirun glxgears -info
# 如果失败，尝试下列命令，64位系统:
$ optirun glxspheres64
# 内有动画的窗口出现，那么 Optimus 和 Bumblebee 正在工作。 如果 glxgears 失败但 glxspheresXX 有效，替换所有 "glxgears" 为 "glxspheresXX"
# https://wiki.archlinux.org/index.php/Bumblebee_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)     电源管理

